<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DuoDuel | The Entrance</title>
    <link rel="stylesheet" href="assets/css/tailwind.css"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="manifest" href="manifest.json"><script>if("serviceWorker" in navigator){navigator.serviceWorker.register("sw.js")}</script>
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;600&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        .serif {
            font-family: 'Playfair Display', serif;
        }
        
        #splash {
            position: fixed;
            inset: 0;
            background: #f8fafc; /* bg-gray-50 */
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            transition: opacity 0.5s ease-out;
        }

        .symbol-container {
            position: relative;
            width: 100px;
            height: 100px;
        }

        .symbol {
            position: absolute;
            font-size: 2rem;
            font-weight: bold;
            transition: all 1s ease-in-out;
        }

        /* Symbol orbits */
        .symbol-1 { top: 0; left: 50%; transform: translateX(-50%); color: #0284c7; } /* Triangle */
        .symbol-2 { bottom: 0; left: 50%; transform: translateX(-50%); color: #e11d48; } /* X */
        .symbol-3 { left: 0; top: 50%; transform: translateY(-50%); color: #059669; } /* Circle */
        .symbol-4 { right: 0; top: 50%; transform: translateY(-50%); color: #7c3aed; } /* Square */

        .merging .symbol {
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            opacity: 0;
        }

        .logo-d {
            font-size: 4rem;
            font-weight: 900;
            opacity: 0;
            transition: opacity 0.5s ease-in;
            color: #1e293b;
        }

        .merging .logo-d {
            opacity: 1;
        }
    </style>
<script src="assets/js/audio.js"></script></head>
<body class="bg-gray-50 text-gray-900">

    <!-- Splash Screen -->
    <div id="splash">
        <div class="symbol-container flex items-center justify-center" id="symbol-box">
            <img src="assets/img/logo.png" alt="DuoDuel" class="w-32 h-auto opacity-0 scale-90 transition-all duration-1000 ease-out" id="splash-logo">
        </div>
    </div>

    <!-- Landing Page -->
    <main id="landing" class="min-h-screen flex flex-col items-center justify-center p-6 opacity-0 transition-opacity duration-1000">
        <header class="text-center mb-12 flex flex-col items-center">
            <img src="assets/img/logo.png" alt="DuoDuel Logo" class="w-48 md:w-64 lg:w-80 h-auto mb-4 drop-shadow-sm">
            <p class="text-gray-500 uppercase tracking-widest text-sm">The Game Simulation</p>
        </header>

        <section class="max-w-md w-full bg-white rounded-2xl shadow-sm border border-gray-100 p-8 mb-8 prose prose-gray">
            <h2 class="text-2xl font-bold mb-4">The Terms of Trust</h2>
            <ul id="rules-list" class="space-y-3 list-none p-0">
                <!-- Rules will be injected here -->
            </ul>
        </section>

        <button onclick="window.location.href='onboarding.html'" class="group relative inline-flex items-center justify-center px-10 py-4 bg-gray-900 text-white rounded-full overflow-hidden transition-all hover:pr-12">
            <span class="relative z-10 flex items-center gap-2 font-bold tracking-wide">
                <span class="text-xl">▢</span> Start Onboarding
            </span>
            <span class="absolute right-4 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300">→</span>
        </button>

        <!-- PWA Install Button (Hidden by default) -->
        <button id="install-btn" class="hidden mt-6 px-6 py-2 bg-blue-50 text-blue-600 rounded-full text-xs font-bold uppercase tracking-widest hover:bg-blue-100 transition-all">
            Install App
        </button>
    </main>

    <script>
        // PWA Install Logic
        let deferredPrompt;
        const installBtn = document.getElementById('install-btn');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.classList.remove('hidden');
        });

        installBtn.addEventListener('click', (e) => {
            installBtn.classList.add('hidden');
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
                deferredPrompt = null;
            });
        });

        // Splash & Content Logic
        document.addEventListener('DOMContentLoaded', async () => {
            const splash = document.getElementById('splash');
            const splashLogo = document.getElementById('splash-logo');
            const landing = document.getElementById('landing');
            const rulesList = document.getElementById('rules-list');

            // Load Content
            try {
                const response = await fetch('assets/json/content.json');
                const data = await response.json();
                
                if(rulesList && data.landing.rules) {
                    data.landing.rules.forEach(rule => {
                        const li = document.createElement('li');
                        li.className = 'flex gap-3 items-start';
                        li.innerHTML = `<span class="text-blue-500 mt-1">△</span> <span>${rule}</span>`;
                        rulesList.appendChild(li);
                    });
                }
            } catch (error) {
                console.error('Error loading content:', error);
            }

            // Splash Animation Sequence
            setTimeout(() => {
                if(splashLogo) {
                    splashLogo.classList.remove('opacity-0', 'scale-90');
                    splashLogo.classList.add('opacity-100', 'scale-100');
                }
            }, 100);

            setTimeout(() => {
                splash.style.opacity = '0';
                landing.classList.remove('opacity-0');
                setTimeout(() => {
                    splash.style.display = 'none';
                }, 500);
            }, 2500);
        });
    </script>
</body>
</html>
